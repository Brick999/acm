#include <stdio.h>
#include <stdlib.h>
#include <math.h>

/* N^N enters cycle of length 18 when calculating iterated sum of digits
   in base 10 */
static const char heur1[] =
        "149429719159479789";

/* N^N enters cycle of length 990 when calculating iterated sum of digits
   in base 100 */
static const char heur2[] =
	"010427585627618227017745857045160809736754225627343736374145313499349"
	"836820490677481435545648609313418978045556718494745618272823299672581"
	"347136460445671145610181919536769754888945914981316536700199016809319"
	"754703536102245043836348272820545223463708927193118676599348245371481"
	"853409344445105827040245523754552309319709346209916799672927250172825"
	"027768845252645825890045645880172015936402554979899016736499209439181"
	"017745139709979881465854225681169145825027493499340881014963312945435"
	"545822381587063345345556754583881790163373299679709975345733136671145"
	"078236015027941654888936376727580281340199015045042518259809102245674"
	"727706454915945223490975309100490586599343727912327941627344445190445"
	"497409070154552327677036700845646799676536163790014181768845975309646"
	"718314745880118821445941672169899015881673836793745017745943481256236"
	"103154225645258281643236043499343509643154040236435545370536671672167"
	"145556763045627526418013299671645708081196709671145439127376845857054"
	"888909643109672909250199019527583472161727102245589245169190372345223"
	"472342636735854316599340136825909762581344445463109316581799154552381"
	"492545161727826799677481348263649545768845168981910463672045880154910"
	"581133463709899013109312045076436017745401636341727284954225636700127"
	"916881673499341745375818586509435545011427049754252645556790312009433"
	"790913299677027258927284927671145523745824109403454888927010436047445"
	"970199013236497090340881102245312009970118641445223418168045284972496"
	"599349181010536137045344445286781582936436454552345581681979836376799"
	"670209976454376836768845707136014972493845880163372327859718349899014"
	"945044781520109017745762527703545190454225609976409019509583499346227"
	"916772498327435545915945492590708945556772679236079154643299673436162"
	"609105881671145796409643281132554888981825845498327160199014181671663"
	"976245102245495681253763018645223454257181466763046599346409648645409"
	"736344445734936678327618254552336043427253581016799678345709118913209"
	"768845348027373154589245880190648609767090259899";

#define MAXN   100010
#define MAXDIG 500010

static int len[MAXN];
static char dig[MAXDIG];
static int ndig, root;

int main()
{
	static int t;
	int i, j, c;

	for (i = 1; i < MAXN; i++)
		len[i] = (int)floor(1. + (double)i * log10((double)i));

	scanf("%d", &t);
	while (t-- > 0) {
		while ((c = getchar()) != EOF && (c < '0' || c > '9'));
		if (c == EOF)
			break;

		while (c != EOF && c == '0')
			c = getchar();

		for (ndig = 0; c != EOF && c >= '0' && c <= '9'; c = getchar())
			dig[ndig++] = c - '0';

		if (ndig == 1) {
			if (dig[0] == 1)
				printf("1\n");
			else if (dig[0] == 4)
				printf("2\n");
			else
				printf("-1\n");
			continue;
		}

		for (i = 1, j = MAXN - 1; i < j;) {
			c = (i + j) >> 1;
			if (len[c] < ndig)
				i = c + 1;
			else if (len[c] > ndig)
				j = c - 1;
			else
				i = j = c;
		}

		if (len[i] != ndig) {
			printf("-1\n");
			continue;
		}

		root = i;

		for (i = 0, c = 0; i < ndig; i++)
			c += dig[i];

		while (c >= 10) {
			for (i = 0; c > 0; c /= 10)
				i += (c % 10);
			c = i;
		}

		if (c != (heur1[(root - 1) % 18] - '0')) {
			printf("-1\n");
			continue;
		}

		if (ndig & 1)
			c = dig[0], i = 1;
		else
			c = 0, i = 0;

		for (; (i + 1) < ndig; i += 2)
			c += dig[i] * 10 + dig[i + 1];

		while (c >= 100) {
			for (i = 0; c > 0; c /= 100)
				i += (c % 100);
			c = i;
		}

		i = ((root - 1) % 990) * 2;
		i = (heur2[i] - '0') * 10 + (heur2[i + 1] - '0');

		if (i != c) {
			printf("-1\n");
			continue;
		}

		printf("%d\n", root);
	}

	return 0;
}
